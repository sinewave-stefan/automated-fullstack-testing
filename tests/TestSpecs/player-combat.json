{
  "id": "player-combat-test",
  "name": "Player Combat Test",
  "description": "Complete combat scenario with damage, healing, and death",
  "setup": {
    "players": [
      {
        "id": "player1",
        "name": "Warrior",
        "x": 0.0,
        "y": 0.0,
        "health": 100
      },
      {
        "id": "player2",
        "name": "Mage",
        "x": 5.0,
        "y": 5.0,
        "health": 80
      }
    ],
    "aiEntities": []
  },
  "steps": [
    {
      "advanceSteps": 1,
      "command": null,
      "assertions": [
        {
          "type": "PlayerCount",
          "expected": 2
        },
        {
          "type": "PlayerHealth",
          "targetId": "player1",
          "expected": 100
        },
        {
          "type": "PlayerHealth",
          "targetId": "player2",
          "expected": 80
        }
      ]
    },
    {
      "advanceSteps": 0,
      "command": {
        "type": "Damage",
        "targetId": "player1",
        "parameters": {
          "amount": 30
        }
      },
      "assertions": []
    },
    {
      "advanceSteps": 1,
      "command": null,
      "assertions": [
        {
          "type": "PlayerHealth",
          "targetId": "player1",
          "expected": 70
        },
        {
          "type": "PlayerIsAlive",
          "targetId": "player1"
        }
      ]
    },
    {
      "advanceSteps": 0,
      "command": {
        "type": "Heal",
        "targetId": "player1",
        "parameters": {
          "amount": 20
        }
      },
      "assertions": []
    },
    {
      "advanceSteps": 1,
      "command": null,
      "assertions": [
        {
          "type": "PlayerHealth",
          "targetId": "player1",
          "expected": 90
        }
      ]
    },
    {
      "advanceSteps": 0,
      "command": {
        "type": "Damage",
        "targetId": "player2",
        "parameters": {
          "amount": 100
        }
      },
      "assertions": []
    },
    {
      "advanceSteps": 1,
      "command": null,
      "assertions": [
        {
          "type": "PlayerHealth",
          "targetId": "player2",
          "expected": 0
        },
        {
          "type": "PlayerIsDead",
          "targetId": "player2"
        },
        {
          "type": "PlayerIsAlive",
          "targetId": "player1"
        }
      ]
    },
    {
      "advanceSteps": 0,
      "command": {
        "type": "Move",
        "targetId": "player1",
        "parameters": {
          "deltaX": 10.0,
          "deltaY": 15.0
        }
      },
      "assertions": []
    },
    {
      "advanceSteps": 1,
      "command": null,
      "assertions": [
        {
          "type": "PlayerPositionX",
          "targetId": "player1",
          "expected": 10.0,
          "tolerance": 0.01
        },
        {
          "type": "PlayerPositionY",
          "targetId": "player1",
          "expected": 15.0,
          "tolerance": 0.01
        }
      ]
    }
  ]
}
